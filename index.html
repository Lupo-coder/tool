<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0">
    <!-- SEO Meta -->
    <title>Smart Compress: Free Image Optimizer | Responsive Web Tool</title>
    <meta name="description" content="Compress and optimize images online with dynamic quality control. Select compression level, preview before & after. Fast, private, and mobile friendly.">
    <meta name="keywords" content="image compression, optimizer, reduce image size, jpeg png webp, free tool, adsense ready">
    <meta name="author" content="Smart Compress">
    <link rel="canonical" href="https://www.example.com/smart-compress">
    <!-- Open Graph for social media -->
    <meta property="og:title" content="Smart Compress ‚Äì dynamic image optimizer">
    <meta property="og:description" content="Compress images directly in your browser. Choose quality level and see instant results.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://www.example.com/smart-compress">
    <meta property="og:image" content="https://www.example.com/og-image.jpg"> <!-- replace with actual image -->
    <!-- Twitter card -->
    <meta name="twitter:card" content="summary_large_image">
    <!-- Performance & SEO friendly: preconnect, dns-prefetch for adsense and external resources -->
    <link rel="preconnect" href="https://pagead2.googlesyndication.com" crossorigin>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:opsz,wght@14..32,400;14..32,500;14..32,600&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: 'Inter', system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #f4f7fb;
            color: #1a2b3c;
            line-height: 1.5;
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }
        /* main container */
        .container {
            max-width: 1300px;
            margin: 0 auto;
            padding: 1rem 1.5rem;
            width: 100%;
            flex: 1;
        }
        /* header */
        .site-header {
            text-align: center;
            margin: 0.5rem 0 1.5rem;
        }
        .site-header h1 {
            font-size: 2.2rem;
            font-weight: 600;
            letter-spacing: -0.02em;
            background: linear-gradient(145deg, #0f2b4b, #1f4b7a);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        .site-header p {
            font-size: 1.2rem;
            color: #2c3e50;
            max-width: 700px;
            margin: 0.5rem auto 0;
        }
        /* AdSense slots ‚Äì responsive placeholders */
        .ad-container {
            display: flex;
            justify-content: center;
            align-items: center;
            background: #e9ecf0;
            border-radius: 12px;
            padding: 1.2rem 0.8rem;
            margin: 1.8rem 0;
            text-align: center;
            border: 1px dashed #5f7d9c;
            color: #2a4b6c;
            font-weight: 500;
            min-height: 120px;
            width: 100%;
            overflow: hidden;
        }
        .ad-label {
            font-size: 0.8rem;
            text-transform: uppercase;
            letter-spacing: 1px;
            color: #6b7f94;
            margin-bottom: 4px;
        }
        .ad-placeholder {
            width: 100%;
        }
        .ad-code-snippet {
            background: #f0f3f6;
            padding: 0.5rem;
            border-radius: 8px;
            font-family: monospace;
            font-size: 0.9rem;
            color: #153e60;
            word-break: break-word;
        }
        /* tool grid */
        .tool-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
            margin: 2rem 0 2.5rem;
        }
        .upload-panel, .compress-panel {
            background: white;
            border-radius: 28px;
            padding: 1.8rem 1.8rem 2rem;
            box-shadow: 0 20px 35px -8px rgba(0, 30, 60, 0.15);
            backdrop-filter: blur(2px);
            transition: all 0.2s;
        }
        .upload-panel {
            border: 1px solid rgba(78, 128, 180, 0.2);
        }
        .compress-panel {
            border: 1px solid rgba(46, 134, 112, 0.2);
        }
        h2 {
            font-size: 1.6rem;
            font-weight: 500;
            margin-bottom: 1.5rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        h2 span {
            background: #1e3c5a;
            color: white;
            font-size: 1rem;
            padding: 0.2rem 0.8rem;
            border-radius: 40px;
        }
        /* file zone */
        .file-zone {
            border: 2px dashed #b6ccda;
            border-radius: 24px;
            padding: 2.2rem 1rem;
            text-align: center;
            background: #f8fafd;
            cursor: pointer;
            transition: border 0.2s, background 0.2s;
            margin-bottom: 1.2rem;
        }
        .file-zone:hover {
            border-color: #2b6c9e;
            background: #eef4fa;
        }
        .file-zone svg {
            width: 48px;
            height: 48px;
            stroke: #31668f;
            stroke-width: 1.5;
            fill: none;
            margin-bottom: 8px;
        }
        .file-zone p {
            font-size: 1rem;
            color: #2b4a6b;
        }
        .file-zone .small {
            font-size: 0.85rem;
            color: #7b95af;
            margin-top: 10px;
        }
        input[type="file"] {
            display: none;
        }
        /* compression slider & options */
        .quality-control {
            margin: 2rem 0 2rem;
        }
        .slider-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
        }
        .slider-label {
            font-weight: 600;
            color: #1b3d5e;
        }
        .value-badge {
            background: #d4e2f0;
            padding: 0.3rem 1rem;
            border-radius: 40px;
            font-size: 0.95rem;
            font-weight: 500;
        }
        input[type=range] {
            width: 100%;
            height: 8px;
            background: linear-gradient(90deg, #4b86b4, #64b5b4);
            border-radius: 12px;
            -webkit-appearance: none;
        }
        input[type=range]::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 24px;
            height: 24px;
            background: white;
            border-radius: 50%;
            box-shadow: 0 4px 10px #0b2e46;
            border: 2px solid #19647e;
            cursor: pointer;
            margin-top: -8px;
        }
        .format-selector {
            display: flex;
            gap: 1.5rem;
            margin: 1.8rem 0;
            background: #eaf1f9;
            padding: 1rem 1.5rem;
            border-radius: 48px;
            align-items: center;
            flex-wrap: wrap;
        }
        .format-selector label {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            font-weight: 500;
            cursor: pointer;
        }
        button {
            background: #1b5a7e;
            border: none;
            color: white;
            font-size: 1.2rem;
            font-weight: 500;
            padding: 1rem 2rem;
            border-radius: 60px;
            width: 100%;
            cursor: pointer;
            transition: background 0.2s, transform 0.1s;
            box-shadow: 0 8px 18px -6px #124061;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }
        button:hover {
            background: #0e4468;
        }
        button:active {
            transform: scale(0.98);
        }
        button:disabled {
            opacity: 0.5;
            pointer-events: none;
        }
        .preview-section {
            margin: 2rem 0 0;
            display: flex;
            flex-direction: column;
            gap: 1.2rem;
        }
        .preview-pair {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
            justify-content: space-between;
        }
        .preview-card {
            background: #f2f6fc;
            border-radius: 20px;
            padding: 1rem;
            flex: 1 1 200px;
            text-align: center;
            box-shadow: inset 0 2px 6px #00000008, 0 6px 12px #d1dce8;
        }
        .preview-card h3 {
            font-weight: 500;
            font-size: 1.1rem;
            color: #153e58;
            margin-bottom: 12px;
        }
        .image-preview {
            max-width: 100%;
            max-height: 180px;
            border-radius: 12px;
            background: #d9e2ec;
            object-fit: contain;
            box-shadow: 0 4px 8px #bacddc;
        }
        .file-meta {
            font-size: 0.9rem;
            margin-top: 8px;
            color: #2b506e;
        }
        .download-area {
            margin: 1.5rem 0 0.5rem;
            text-align: center;
        }
        #downloadBtn {
            background: #2d7a6c;
            box-shadow: 0 8px 18px -6px #1b5246;
            width: auto;
            padding: 0.8rem 2.5rem;
            display: inline-block;
            font-size: 1.1rem;
        }
        #downloadBtn:hover {
            background: #1f5f52;
        }
        footer {
            text-align: center;
            padding: 2rem 0 1rem;
            color: #5a7792;
            border-top: 1px solid #cbdae7;
            margin-top: 1rem;
        }
        /* responsive */
        @media (max-width: 800px) {
            .tool-grid {
                grid-template-columns: 1fr;
                gap: 1.5rem;
            }
            .site-header h1 { font-size: 1.9rem; }
        }
        @media (max-width: 500px) {
            .container { padding: 0.8rem; }
            .format-selector { flex-direction: column; align-items: start; border-radius: 28px; }
        }
        .hidden { display: none; }
    </style>
</head>
<body>
    <div class="container">
        <header class="site-header">
            <h1>üñºÔ∏è Smart Compress ¬∑ Optimizer</h1>
            <p>Choose compression level, compare original & optimized. Fast, client-side.</p>
        </header>

        <!-- AdSense Slot #1 (top banner) - insert your ad unit code here -->
        <div class="ad-container" id="ad-slot-top">
            <div class="ad-placeholder">
                <div class="ad-label">ADVERTISEMENT</div>
                <!-- Replace this comment with your Google AdSense code snippet -->
                <div class="ad-code-snippet" style="background:#e2e9f2;">
                    ‚ö° AdSense unit (top) ‚Äî replace with your ad code<br>
                    <span style="font-size:0.8rem;">data-ad-slot="1234567890"</span>
                </div>
                <!-- Example AdSense script format (replace with actual) 
                <ins class="adsbygoogle"
                     style="display:block"
                     data-ad-client="ca-pub-XXXXXXXXXXXXXXXX"
                     data-ad-slot="YOUR_AD_SLOT_ID"
                     data-ad-format="auto"
                     data-full-width-responsive="true"></ins>
                <script>(adsbygoogle = window.adsbygoogle || []).push({});</script>
                -->
            </div>
        </div>

        <!-- Main tool area -->
        <div class="tool-grid">
            <!-- left: upload & preview original -->
            <div class="upload-panel">
                <h2>üìÇ 1. Upload image <span>JPEG/PNG/WEBP</span></h2>
                <div class="file-zone" id="dropZone" tabindex="0" role="button" aria-label="click to upload image">
                    <svg viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" />
                        <polyline points="17 8 12 3 7 8" />
                        <line x1="12" y1="3" x2="12" y2="15" />
                    </svg>
                    <p><strong>Click or drag image</strong></p>
                    <p class="small">Supports JPG, PNG, WEBP (max 20MB)</p>
                    <input type="file" id="fileInput" accept="image/jpeg,image/png,image/webp" />
                </div>
                <div class="preview-card">
                    <h3>üñºÔ∏è Original</h3>
                    <img id="originalPreview" class="image-preview" alt="Original preview will appear here">
                    <div id="originalMeta" class="file-meta">No file selected</div>
                </div>
            </div>

            <!-- right: compression + output -->
            <div class="compress-panel">
                <h2>‚öôÔ∏è 2. Compress & download</h2>
                <!-- dynamic compression level -->
                <div class="quality-control">
                    <div class="slider-row">
                        <span class="slider-label">üìâ Compression level</span>
                        <span id="qualityValue" class="value-badge">75%</span>
                    </div>
                    <input type="range" id="qualitySlider" min="10" max="100" value="75" step="1">
                    <p style="font-size:0.85rem; margin-top: 6px; color: #4d708b;">Lower size ‚á¢ lower quality / higher ‚á¢ best</p>
                </div>

                <div class="format-selector">
                    <span style="color:#1b4870;">Output format:</span>
                    <label><input type="radio" name="format" value="image/jpeg" checked> JPEG</label>
                    <label><input type="radio" name="format" value="image/png"> PNG</label>
                    <label><input type="radio" name="format" value="image/webp"> WEBP</label>
                </div>

                <button id="compressBtn">‚ú® Compress now</button>

                <!-- compressed preview area -->
                <div class="preview-section" id="compressedPreviewArea">
                    <div class="preview-card">
                        <h3>üì¶ Optimized</h3>
                        <img id="compressedPreview" class="image-preview" alt="Compressed image will appear">
                        <div id="compressedMeta" class="file-meta">-</div>
                    </div>
                </div>

                <div class="download-area">
                    <button id="downloadBtn" disabled style="background:#91a9bc; cursor:not-allowed;" class="disabled-btn">üíæ Download</button>
                </div>
            </div>
        </div>

        <!-- AdSense Slot #2 (content bottom) - insert your ad unit code here -->
        <div class="ad-container" id="ad-slot-bottom">
            <div class="ad-placeholder">
                <div class="ad-label">ADVERTISEMENT</div>
                <div class="ad-code-snippet">
                    ‚ö° AdSense unit (bottom) ‚Äî replace with your ad code<br>
                    <span style="font-size:0.8rem;">data-ad-slot="YOUR_AD_UNIT_ID"</span>
                </div>
                <!-- Sample responsive AdSense code (replace with your own) 
                <ins class="adsbygoogle"
                     style="display:block"
                     data-ad-client="ca-pub-XXXXXXXXXXXXXXXX"
                     data-ad-slot="0987654321"
                     data-ad-format="rectangle"
                     data-full-width-responsive="true"></ins>
                <script>(adsbygoogle = window.adsbygoogle || []).push({});</script>
                -->
            </div>
        </div>

        <footer>
            <p>¬© 2025 Smart Compress ‚Äî all processing is local. No server uploads. SEO optimized.</p>
        </footer>
    </div>

    <script>
        (function() {
            // DOM elements
            const dropZone = document.getElementById('dropZone');
            const fileInput = document.getElementById('fileInput');
            const originalPreview = document.getElementById('originalPreview');
            const originalMeta = document.getElementById('originalMeta');
            const qualitySlider = document.getElementById('qualitySlider');
            const qualityValue = document.getElementById('qualityValue');
            const formatRadios = document.querySelectorAll('input[name="format"]');
            const compressBtn = document.getElementById('compressBtn');
            const compressedPreview = document.getElementById('compressedPreview');
            const compressedMeta = document.getElementById('compressedMeta');
            const downloadBtn = document.getElementById('downloadBtn');

            let originalFile = null;
            let originalImageData = null; // store image element or blob URL?
            let compressedBlob = null;
            let compressedObjectUrl = null;

            // quality display
            qualitySlider.addEventListener('input', function() {
                qualityValue.textContent = this.value + '%';
            });

            // trigger file input when dropzone clicked
            dropZone.addEventListener('click', () => fileInput.click());
            dropZone.addEventListener('dragover', (e) => {
                e.preventDefault();
                dropZone.style.borderColor = '#2b6c9e';
                dropZone.style.background = '#eef4fa';
            });
            dropZone.addEventListener('dragleave', () => {
                dropZone.style.borderColor = '#b6ccda';
                dropZone.style.background = '#f8fafd';
            });
            dropZone.addEventListener('drop', (e) => {
                e.preventDefault();
                dropZone.style.borderColor = '#b6ccda';
                dropZone.style.background = '#f8fafd';
                const files = e.dataTransfer.files;
                if (files.length > 0 && files[0].type.match('image.*')) {
                    handleFile(files[0]);
                } else {
                    alert('Please drop an image file (JPEG/PNG/WEBP)');
                }
            });

            fileInput.addEventListener('change', (e) => {
                if (fileInput.files.length > 0) {
                    handleFile(fileInput.files[0]);
                }
            });

            function handleFile(file) {
                if (!file.type.match('image.*')) {
                    alert('File must be an image');
                    return;
                }
                originalFile = file;
                // revoke old objectURL to avoid memory leaks
                if (originalPreview.src && originalPreview.src.startsWith('blob:')) {
                    URL.revokeObjectURL(originalPreview.src);
                }
                const url = URL.createObjectURL(file);
                originalPreview.src = url;
                originalPreview.onload = () => {
                    // free if needed later
                };
                const sizeKb = (file.size / 1024).toFixed(2);
                originalMeta.innerHTML = `${file.name}<br>${(file.size / 1024).toFixed(0)} kB (${file.type})`;

                // reset compressed area
                clearCompressed();
                downloadBtn.disabled = true;
                downloadBtn.style.background = '#91a9bc';
                downloadBtn.style.cursor = 'not-allowed';
            }

            function clearCompressed() {
                if (compressedObjectUrl) {
                    URL.revokeObjectURL(compressedObjectUrl);
                    compressedObjectUrl = null;
                }
                compressedPreview.src = '';
                compressedMeta.textContent = '-';
                compressedBlob = null;
            }

            // compression logic
            compressBtn.addEventListener('click', function() {
                if (!originalFile) {
                    alert('Please select an image first');
                    return;
                }
                if (!originalPreview.src) return;

                const quality = parseInt(qualitySlider.value) / 100;
                // get selected format
                let selectedFormat = 'image/jpeg';
                for (let radio of formatRadios) {
                    if (radio.checked) {
                        selectedFormat = radio.value;
                        break;
                    }
                }

                // use originalPreview as image source (already loaded)
                const img = new Image();
                img.crossOrigin = 'anonymous'; // not needed but safe
                img.src = originalPreview.src;
                img.onload = function() {
                    // create canvas
                    const canvas = document.createElement('canvas');
                    canvas.width = img.width;
                    canvas.height = img.height;
                    const ctx = canvas.getContext('2d');
                    ctx.drawImage(img, 0, 0);
                    // convert to blob with quality
                    canvas.toBlob((blob) => {
                        if (!blob) {
                            alert('Compression failed. Try another format.');
                            return;
                        }
                        // update compressed preview
                        if (compressedObjectUrl) URL.revokeObjectURL(compressedObjectUrl);
                        compressedObjectUrl = URL.createObjectURL(blob);
                        compressedPreview.src = compressedObjectUrl;
                        compressedBlob = blob;

                        const compSize = (blob.size / 1024).toFixed(2);
                        const originalSize = (originalFile.size / 1024).toFixed(2);
                        const percent = ((blob.size / originalFile.size)*100).toFixed(1);
                        compressedMeta.innerHTML = `Size: ${compSize} kB (${percent}% of original)<br>Format: ${blob.type}`;

                        // enable download
                        downloadBtn.disabled = false;
                        downloadBtn.style.background = '#2d7a6c';
                        downloadBtn.style.cursor = 'pointer';
                    }, selectedFormat, quality);
                };
                img.onerror = () => alert('Error loading image for compression.');
            });

            // download button
            downloadBtn.addEventListener('click', function() {
                if (!compressedBlob) return;
                const link = document.createElement('a');
                link.href = URL.createObjectURL(compressedBlob);
                const ext = compressedBlob.type.split('/')[1] || 'jpg';
                link.download = `optimized-${Date.now()}.${ext.replace('jpeg','jpg')}`;
                link.click();
                URL.revokeObjectURL(link.href);
            });

            // helper to reset file input if needed (optional)
        })();
    </script>

    <!-- Optional: preconnect for adsense (already in head) -->
    <!-- You can place your AdSense script here or inside ad placeholders -->
    <script>
        // Example of how you would include your AdSense account (uncomment and replace with your publisher ID)
        /*
        (adsbygoogle = window.adsbygoogle || []).push({});
        */
    </script>
    <!-- Google tag (gtag.js) if needed - but only adsense is required -->
</body>
</html>
